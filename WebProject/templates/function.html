<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" type="text/javascript"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.4.9/css/fileinput.min.css" media="all" rel="stylesheet" type="text/css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.4.9/js/fileinput.min.js"></script>


    <title>Base Function</title>

    <style type="text/css">
        body{
            background-repeat: no-repeat;
            {#background-image: url(/static/img/7.png);#}
            background-color: #F0F0F0;
            background-size:cover;
            font-size: 16px;}
        .form{
            background-color: rgba(255, 255, 255, 0.2);
            width:400px;margin:100px auto;}
        .container{
            {#background-color: #F0F0F0;#}
            height: 750px;
            width: 1200px;
            margin-top: 50px;}
    </style>
  </head>

  <body>

    {% for message in get_flashed_messages() %}
      <div class="alert alert-warning">
          {{ message }}
      </div>
    {% endfor %}

    <div class="container">
        <div class="pull-right">
            If want to use more functions, please
            <a href="{{ url_for('login') }}">Sign In</a>
        </div>
{#        <input type="button" class="btn btn-info pull-right" id="back_btn" value="Sign In" onclick="window.location.href='{{ url_for('login') }}'"/>#}
        <main>
            <div class="container">
              <div class="row">
                <div class = "col">
                  <h3>Please select an image </h3>
                    <hr>
<!--                    hello-->
                    <form onsubmit="hello()" id="myAnchor">
                        <input id="input2" name="input2" type="file" class="file" multiple="false" accept="image/*" onsubmit="hello()">
                    </form>
                    <script>
                    document.getElementById("myAnchor").addEventListener("submit", function(event){
                      event.preventDefault()
                    });

                    async function hello()
                    {
                        console.log("in")
                        let user = { name:'john', age:34 };
                        let formData = new FormData();
                        let photo = document.getElementById("input2").files[0];

                        formData.append("photo", photo);
                        formData.append("user", JSON.stringify(user));

                        try {
                           let r = await fetch('/predict_api', {method: "POST", body: formData});
                           console.log(r)
                           console.log('HTTP response code:',r.status);
                        } catch(e) {
                           console.log('Huston we have problem...:', e);
                        }
                    }
                    </script>
<!--                    <script>-->
<!--                        async function SavePhoto()-->
<!--                        {-->
<!--                            console.log("in")-->
<!--                            let user = { name:'john', age:34 };-->
<!--                            let formData = new FormData();-->
<!--                            let photo = document.getElementById("input2").files[0];-->

<!--                            formData.append("photo", photo);-->
<!--                            formData.append("user", JSON.stringify(user));-->

<!--                            try {-->
<!--                               let r = await fetch('http://127.0.0.1:5000/predict_api', {method: "POST", body: formData});-->
<!--                               console.log(r)-->
<!--                               console.log('HTTP response code:',r.status);-->
<!--                            } catch(e) {-->
<!--                               console.log('Huston we have problem...:', e);-->
<!--                            }-->
<!--                        }-->
<!--                    </script>-->
                    <hr>
                    <h3>Result</h3>
                    {{ result }}

                </div>
              </div>

            </div>
        </main>

    </div>
  </body>
</html>